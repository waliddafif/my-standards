# .cursorrules

> Les règles et conventions sont définies dans `CLAUDE.md`.
> En cas de conflit, **`CLAUDE.md` fait foi**.

## Démarrage

**Commence par lire `CLAUDE.md`** — c'est la source de vérité pour :
- Stack technique et architecture
- Règles spécifiques au projet
- Commandes essentielles

Les règles universelles (sécurité, conventions, tests) sont dans `~/.claude/CLAUDE.md`.

## Règles prioritaires (résumé)

1. Jamais `detail=str(e)` dans les réponses HTTP
2. Lire les modèles/schémas AVANT de coder
3. `float()` sur Decimal, `str()` sur UUID avant sérialisation
4. Base de données réelle dans les tests (pas SQLite si prod = PostgreSQL)
5. Secrets GCP sans `\n` final (`echo -n`)

## Sécurité étendue

Les règles de sécurité couvrent 3 couches (voir `~/Documents/my-standards/rules/SECURITY.md`) :
- **S1-S9** : Règles internes (timing attacks, SQL injection, rate limiting, etc.)
- **S10-S19** : OWASP Top 10 2025 (CORS, CSRF, input validation, password hashing, CSP, Next.js CVEs)
- **AG1-AG10** : OWASP Agentic Top 10 2026 (prompt injection, tool misuse, MCP auth, agent audit trail)

## Fichiers à consulter selon le besoin

| Besoin | Fichier |
|--------|---------|
| Architecture | `.claude/context/ARCHITECTURE.md` |
| Sécurité (S1-S19, AG1-AG10) | `~/Documents/my-standards/rules/SECURITY.md` |
| Conventions code | `~/Documents/my-standards/rules/CODING.md` |
| Conventions tests | `~/Documents/my-standards/rules/TESTING.md` |
| Ops | `docs/ops/RUNBOOK.md` |
